# RSS Feed Aggregator (Go + PostgreSQL)

<p align="center">
  <img src="screenshots/demo.gif" width="650">
</p>


Command-line RSS feed aggregator written in Go. It allows users to:

* Create and log into accounts
* Add RSS feeds
* Follow and unfollow feeds
* Automatically scrape feeds on a schedule
* Store posts in PostgreSQL
* Browse aggregated articles directly from the terminal

This project demonstrates backend engineering skills in:

* Go CLI design
* Database-backed application development
* SQLC for type-safe SQL queries
* Goose for database migrations
* XML parsing and RSS ingestion
* Long-running background workers
* Clean, modular program architecture

---

## ğŸš€ Features

### ğŸ§‘â€ğŸ’» User Accounts

* Register new users
* Log in and persist session state
* List all users

### ğŸ“¡ Feed Management

* Add new RSS feeds
* Automatically follow feeds you add
* List all known feeds
* Follow or unfollow any feed

### ğŸ” Background Aggregator

* Continuously fetches RSS feeds using a `time.Ticker`
* Parses XML (title, link, description, publication date)
* Saves posts into PostgreSQL
* Gracefully handles duplicate posts

### ğŸ“° Post Browsing

* View recent posts from feeds you follow
* Clean, chronological timeline output

---

## ğŸ Quick Start

### 1. Start PostgreSQL

```sh
sudo service postgresql start
```

### 2. Ensure config file exists

Create `~/.rssfeedconfig.json`:

```json
{
  "db_url": "postgres://username:password@localhost:5432/feed_aggregator?sslmode=disable",
  "current_user_name": ""
}
```

### 3. Run database migrations

```sh
goose postgres <CONNECTION_STR> up
```

### 4. Use the CLI

Register a user:

```sh
go run . register rahul
```

Log in:

```sh
go run . login rahul
```

Add and auto-follow a feed:

```sh
go run . addfeed "hacker News" https://news.ycombinator.com/rss
```

Run aggregator loop (running in a separate terminal):

```sh
go run . agg 30s
```

Browse posts:

```sh
go run . browse 10
```

---

## ğŸ§  Architecture Overview

### ğŸ—ï¸ CLI Layer (`internal/cli/`)

* `commands.go` holds the command registry
* `middleware.go` enforces login requirements
* Each command has a dedicated handler

### ğŸ—„ï¸ Database Layer (`internal/database/`)

* Generated by **sqlc**
* Tables: `users`, `feeds`, `feed_follows`, `posts`

### ğŸ“„ Config Layer (`internal/config/`)

* Stores persistent app state in `~/.rssfeedconfig.json`
* Tracks current logged-in user

### ğŸ“¡ RSS Layer (`internal/rss/`)

* `FetchFeed()` downloads and parses XML
* `ScrapeFeeds()` selects feeds to fetch, processes posts, saves to DB

### ğŸ” Aggregator Loop

Uses a `time.Ticker` to scrape feeds on an interval:

```go
ticker := time.NewTicker(duration)
for ; ; <-ticker.C {
    rss.ScrapeFeeds(state)
}
```

---

## ğŸ› ï¸ Commands

### User Commands

```
register <username>
login <username>
users
reset
```

### Feed Commands

```
addfeed <name> <url>
feeds
follow <url>
unfollow <url>
following
```

### Aggregation & Browsing

```
agg <duration>
browse <limit>
```

### Help

```
help
```

---

## ğŸ“¦ Project Structure

```
internal/
  cli/
    commands.go
    middleware.go
    handlers/
      handler_addfeed.go
      handler_follow.go
      handler_browse.go
      ...
  config/
  database/
  rss/
sql/
  queries/
  schema/
main.go
```

---

## ğŸ‰ Conclusion

This project is a fully functional RSS aggregator that demonstrates:

* Backend architecture in Go
* PostgreSQL integration
* XML data ingestion
* CLI tooling
* Long-running background services

It provides a real-world example of building a small, but complete backend system from scratch.
